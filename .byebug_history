exit
q
redirect_to
redirect_to root_url
redirect_to root_path
redirect_to
root_path
current_user
flash
session[:user_id]
session.delete(:user_id)
session[:user_id]
current_user
session
current_user
continue
@activities
continue
@activities
continue
session[:activities]
session.activities
session.keys
flash
continue
session[:client]
session.keys
q
Array(client)
client
client.to_a
client = session[:client]
client
session.keys
continue
session[:client]
session.keys
success.keys
flash
q
      session[:client] = Strava::Api::V3::Client.new(:access_token => @user.token).to_json
@user.token
      session[:client] = Strava::Api::V3::Client.new(:access_token => @user.token).to_json
flash.keys
session.keys
@user
q
y
User.first.token
session[:client] = Strava::Api::V3::Client.new(:access_token => @user.token).to_json
continue
flash
session.keys
q
flash
session.keys
sessions.keys
session
q
JSON.parse(a)
a
a = "{\"1\":3,\"2\":4}"
JSON.generate({1=>3, 2=>4})
JSON.parse(_)
JSON.generate({1=>3, 2=>4})
JSON
continue
session[:client]
session.client
session.keys
continue
session.keys
continue
session['client']
session.keys
session.values
session.keys
session
client
flash
q
session[:client]
session[:client].name
session[:client]
session.keys
session
continue
session[:client]
session.client
session.keys
session
flash.keys
flash
q
session.client
session.keys
session
q
session[:user_id]
session.keys
session
q
session.keys
session
q
session.keys
session
q
continue
session.keys
session
continue
q
session[:user_activities]
session["user_activities"]
session.keys["user_id"]
session.keys[:user_activities]
session.keys["user_activities"]
session.keys[
session
q
session.keys["user_activities"]
session.keys[:user_activities]
session.keys
session
continue
q
session[:session_id]
session.keys
session[:token]
session[:user_id]
session[:id]
session
@client.list_athlete_activities
@client
@client = Strava::Api::V3::Client.new(:access_token => token)
token
token = @current_user.token
user = _
@current_user
continue
Strava::Api::V3::Client
Strava
q
continue
Strava::Api::V3::Client
trava::Api::V3::Client
Strava
continue
auth_hash['uid']
user = find_or_create_by(uid: 381269, provider: 'strava')
auth_hash['info']['name']
auth_hash['info']
auth_hash['name']
auth_hash[
continue
n
@user
n
user
n
auth_hash['provider']
auth_hash['uid'].to_i
auth_hash['uid']
continue
@user
continue
q
request.env['omniauth.auth']['info']['name']
request.env['omniauth.auth']['info']
request.env['omniauth.auth']['provider']
request.env['omniauth.auth']['uid']
request.env['omniauth.auth']['extra']
request.env['omniauth.auth']['raw']
request.env['omniauth.auth']
q
request.env['omniauth.auth']
User.from_omniauth(request.env['omniauth.auth'])
@user
n
request.env['omniauth.auth']
